<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lanzador de Dados</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        .navbar {
            background-color: #333;
            overflow: hidden;
        }

        .navbar a {
            float: left;
            display: block;
            color: white;
            text-align: center;
            padding: 14px 20px;
            text-decoration: none;
        }

        .navbar a:hover {
            background-color: #ddd;
            color: black;
        }

        .container {
            max-width: 600px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
        }

        .dado-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        select, input, button {
            padding: 10px;
            margin: 5px;
            width: calc(50% - 12px);
        }

        .resultados {
            margin-top: 20px;
        }

        .resultado-item {
            margin-bottom: 10px;
        }

        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        button {
            flex: 1;
            margin: 5px;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <div class="navbar">
        <a href="index.html">Iniciativas</a>
    </div>

    <div class="container">
        <h1>Lanzador de Dados</h1>

        <!-- Contenedor para los dados -->
        <div id="dados-container">
            <!-- Inicialmente cargamos los dados desde Local Storage -->
        </div>

        <!-- Botones alineados -->
        <div class="btn-container">
            <button id="agregar-dado">Agregar Dado</button>
            <button id="lanzar-dados">Lanzar Dados</button>
            <button id="reiniciar-dados">Reiniciar</button>
        </div>

        <!-- Sección para mostrar los resultados -->
        <div class="resultados" id="resultados">
            <!-- Aquí se mostrarán los resultados -->
        </div>
    </div>

    <script>
        // Cargar datos desde Local Storage al cargar la página
        window.onload = function() {
            const dadosGuardados = JSON.parse(localStorage.getItem('dados')) || [];
            dadosGuardados.forEach(dado => agregarDado(dado.tipo, dado.numero));
        };

        // Función para lanzar un dado
        function lanzarDado(lados) {
            return Math.floor(Math.random() * lados) + 1;
        }

        // Función para agregar una nueva fila de dado
        function agregarDado(tipo = 4, numero = 1) {
            const nuevoDadoDiv = document.createElement('div');
            nuevoDadoDiv.classList.add('dado-item');
            nuevoDadoDiv.innerHTML = `
                <select class="tipo-dado">
                    <option value="4" ${tipo === 4 ? 'selected' : ''}>d4</option>
                    <option value="6" ${tipo === 6 ? 'selected' : ''}>d6</option>
                    <option value="8" ${tipo === 8 ? 'selected' : ''}>d8</option>
                    <option value="12" ${tipo === 12 ? 'selected' : ''}>d12</option>
                    <option value="20" ${tipo === 20 ? 'selected' : ''}>d20</option>
                </select>
                <input type="number" class="numero-dados" min="1" value="${numero}">
            `;
            document.getElementById('dados-container').appendChild(nuevoDadoDiv);
            guardarDados(); // Guarda los dados después de agregarlos
        }

        document.getElementById('agregar-dado').addEventListener('click', function() {
            agregarDado(); // Agrega un dado con valores por defecto
        });

        // Función para manejar el evento de lanzar todos los dados
        document.getElementById('lanzar-dados').addEventListener('click', function() {
            const dadosItems = document.querySelectorAll('.dado-item');
            const resultadosDiv = document.getElementById('resultados');

            // Limpiar resultados anteriores
            resultadosDiv.innerHTML = '';

            // Recorrer cada dado seleccionado y lanzar
            dadosItems.forEach(item => {
                const tipoDado = parseInt(item.querySelector('.tipo-dado').value);
                const numeroDados = parseInt(item.querySelector('.numero-dados').value);

                for (let i = 0; i < numeroDados; i++) {
                    const resultado = lanzarDado(tipoDado);
                    const resultadoItem = document.createElement('div');
                    resultadoItem.classList.add('resultado-item');
                    resultadoItem.textContent = `Dado d${tipoDado}: ${resultado}`;
                    resultadosDiv.appendChild(resultadoItem);
                }
            });
        });

        // Función para reiniciar el formulario y los resultados
        document.getElementById('reiniciar-dados').addEventListener('click', function() {
            // Limpiar el contenedor de dados
            const dadosContainer = document.getElementById('dados-container');
            dadosContainer.innerHTML = '';

            // Limpiar los resultados
            document.getElementById('resultados').innerHTML = '';

            // Reiniciar Local Storage
            localStorage.removeItem('dados');
        });

        // Guardar dados en Local Storage
        function guardarDados() {
            const dadosItems = document.querySelectorAll('.dado-item');
            const dados = [];
            dadosItems.forEach(item => {
                const tipoDado = parseInt(item.querySelector('.tipo-dado').value);
                const numeroDados = parseInt(item.querySelector('.numero-dados').value);
                dados.push({ tipo: tipoDado, numero: numeroDados });
            });
            localStorage.setItem('dados', JSON.stringify(dados));
        }
    </script>
</body>
</html>
